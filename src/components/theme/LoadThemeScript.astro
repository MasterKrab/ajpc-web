<script is:inline>
  const THEMES = {
    DARK: 'dark',
    LIGHT: 'light',
    HIGH_CONTRAST: 'high-contrast',
  }

  const getDeviceSchema = () => {
    if (window.matchMedia('prefers-color-scheme: more').matches)
      return THEMES.HIGH_CONTRAST

    if (window.matchMedia('(prefers-color-scheme: dark)').matches)
      return THEMES.DARK

    return THEMES.LIGHT
  }

  const theme = (() => {
    const storageTheme = localStorage.getItem('theme')

    if (storageTheme) return storageTheme

    return getDeviceSchema()
  })()

  const root = document.documentElement

  root.classList.remove(...Object.values(THEMES))
  root.classList.add(theme)
</script>
